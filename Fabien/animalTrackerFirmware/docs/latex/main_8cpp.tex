\doxysection{Référence du fichier /home/jerta/\+Bureau/\+Projet/\+Debug\&Test\+AB02s/\+Projet\+\_\+2024/\+Fabien/animal\+Tracker\+Firmware/src/main.cpp}
\hypertarget{main_8cpp}{}\label{main_8cpp}\index{/home/jerta/Bureau/Projet/Debug\&TestAB02s/Projet\_2024/Fabien/animalTrackerFirmware/src/main.cpp@{/home/jerta/Bureau/Projet/Debug\&TestAB02s/Projet\_2024/Fabien/animalTrackerFirmware/src/main.cpp}}


Logique globale du système.  


{\ttfamily \#include "{}main.\+h"{}}\newline
Graphe des dépendances par inclusion de main.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=263pt]{main_8cpp__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Fonctions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{main_8cpp_a4fc01d736fe50cf5b977f755b675f11d}{setup}} ()
\begin{DoxyCompactList}\small\item\em Initialise le système à la mise sous tension ou au redémarrage. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{main_8cpp_afe461d27b9c48d5921c00d521181f12f}{loop}} ()
\begin{DoxyCompactList}\small\item\em Boucle principale du programme. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Description détaillée}
Logique globale du système. 

\begin{DoxyAuthor}{Auteur}
Prenom 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
04 2025 
\end{DoxyDate}
\begin{DoxyVersion}{Version}
1.\+0
\end{DoxyVersion}
Ce fichier contient les fonctions setup et loop nécessaire au système. 

Définition dans le fichier \mbox{\hyperlink{main_8cpp_source}{main.\+cpp}}.



\doxysubsection{Documentation des fonctions}
\Hypertarget{main_8cpp_afe461d27b9c48d5921c00d521181f12f}\label{main_8cpp_afe461d27b9c48d5921c00d521181f12f} 
\index{main.cpp@{main.cpp}!loop@{loop}}
\index{loop@{loop}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{loop()}{loop()}}
{\footnotesize\ttfamily void loop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Boucle principale du programme. 

Loop() gère les différentes étapes de l\textquotesingle{}application en fonction de l\textquotesingle{}état actuel du microcontrôleur.

\begin{DoxyNote}{Note}
Le système reste dans le contexte de cette fonction après l\textquotesingle{}initialisation du système. 
\end{DoxyNote}


Définition à la ligne \mbox{\hyperlink{main_8cpp_source_l00058}{58}} du fichier \mbox{\hyperlink{main_8cpp_source}{main.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00059\ \{}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordflow}{switch}\ (mcu\_status)\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordflow}{case}\ STATE\_GPS\_ACQUIRE:}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ gpsAcquire();}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordflow}{case}\ STATE\_SEND\_THRESHOLD\_EXCEEDED:}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ readSendData();}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordflow}{case}\ STATE\_SLEEP:}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ lowPowerSleep();}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ mcu\_status\ =\ STATE\_SLEEP;}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00076\ \ \ \ \ \}}
\DoxyCodeLine{00077\ \}}

\end{DoxyCode}
\Hypertarget{main_8cpp_a4fc01d736fe50cf5b977f755b675f11d}\label{main_8cpp_a4fc01d736fe50cf5b977f755b675f11d} 
\index{main.cpp@{main.cpp}!setup@{setup}}
\index{setup@{setup}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{setup()}{setup()}}
{\footnotesize\ttfamily void setup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Initialise le système à la mise sous tension ou au redémarrage. 

Configure les interfaces de communication (série, Lo\+Ra), initialise le GPS, le timer de réveil, et réalise une première tentative d’acquisition de position. Si un fix GPS est valide, la position est stockée pour référence future.

\begin{DoxyNote}{Note}
Cette fonction est appelée une seule fois au démarrage du microcontrôleur. 
\end{DoxyNote}


Définition à la ligne \mbox{\hyperlink{main_8cpp_source_l00025}{25}} du fichier \mbox{\hyperlink{main_8cpp_source}{main.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00026\ \{}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#ifdef\ DEBUG}}
\DoxyCodeLine{00029\ \ \ \ \ Serial.begin(115200);}
\DoxyCodeLine{00030\ \ \ \ \ Serial.println(\textcolor{stringliteral}{"{}DEBUG:\ Starting\ setup..."{}});}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#ifndef\ NOLORAWAN}}
\DoxyCodeLine{00034\ \ \ \ \ \mbox{\hyperlink{loraWAN_8cpp_aaa9f2c9bc4be8ea8857231146ec620a0}{configureJoinTTN}}();}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ GPS.begin();}
\DoxyCodeLine{00038\ \ \ \ \ gpsAcquire();}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ configureTimer();}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordflow}{if}\ (GPS.location.isValid())\ \{}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ previousLatitude\ =\ GPS.location.lat();}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ previousLongitude\ =\ GPS.location.lng();}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ mcu\_status\ =\ STATE\_SEND\_THRESHOLD\_EXCEEDED;}
\DoxyCodeLine{00046\ \ \ \ \ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \}}

\end{DoxyCode}
