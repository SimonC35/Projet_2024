{"ast":null,"code":"import { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, toDisplayString as _toDisplayString, withModifiers as _withModifiers, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"auth-container\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 1\n};\nconst _hoisted_4 = {\n  type: \"submit\",\n  class: \"submit-btn\"\n};\nconst _hoisted_5 = {\n  key: 3,\n  class: \"toggle-link\"\n};\nconst _hoisted_6 = {\n  key: 4,\n  class: \"toggle-link\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.isLogin ? (_openBlock(), _createElementBlock(\"h2\", _hoisted_2, \"Connexion\")) : (_openBlock(), _createElementBlock(\"h2\", _hoisted_3, \"Inscription\")), _createElementVNode(\"form\", {\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.submitForm && $options.submitForm(...args), [\"prevent\"])),\n    class: \"auth-form\"\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.email = $event),\n    placeholder: \"Email\",\n    required: \"\",\n    class: \"input-field\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.email]]), !$data.isLogin ? _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n    key: 0,\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.name = $event),\n    placeholder: \"Nom\",\n    required: \"\",\n    class: \"input-field\"\n  }, null, 512 /* NEED_PATCH */)), [[_vModelText, $data.name]]) : _createCommentVNode(\"v-if\", true), _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.password = $event),\n    placeholder: \"Mot de passe\",\n    required: \"\",\n    class: \"input-field\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.password]]), _createElementVNode(\"button\", _hoisted_4, _toDisplayString($data.isLogin ? 'Se connecter' : 'S\\'inscrire'), 1 /* TEXT */)], 32 /* NEED_HYDRATION */), $data.message ? (_openBlock(), _createElementBlock(\"p\", {\n    key: 2,\n    class: _normalizeClass([$data.messageClass, \"message\"])\n  }, _toDisplayString($data.message), 3 /* TEXT, CLASS */)) : _createCommentVNode(\"v-if\", true), !$data.isLogin ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"p\", null, [_cache[6] || (_cache[6] = _createTextVNode(\"Déjà un compte ? \")), _createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.toggleForm && $options.toggleForm(...args))\n  }, \"Se connecter\")])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createElementVNode(\"p\", null, [_cache[7] || (_cache[7] = _createTextVNode(\"Pas encore de compte ? \")), _createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.toggleForm && $options.toggleForm(...args))\n  }, \"S'inscrire\")])]))]);\n}","map":{"version":3,"names":["class","key","type","_createElementBlock","_hoisted_1","$data","isLogin","_hoisted_2","_hoisted_3","_createElementVNode","onSubmit","_cache","_withModifiers","args","$options","submitForm","$event","email","placeholder","required","name","_createCommentVNode","password","_hoisted_4","_toDisplayString","message","_normalizeClass","messageClass","_hoisted_5","_createTextVNode","href","onClick","toggleForm","_hoisted_6"],"sources":["/home/felix/Projet_2024/Matts/panimalvue/src/views/AuthPage.vue"],"sourcesContent":["<template>\n    <div class=\"auth-container\">\n      <h2 v-if=\"isLogin\">Connexion</h2>\n      <h2 v-else>Inscription</h2>\n      <form @submit.prevent=\"submitForm\" class=\"auth-form\">\n        <input type=\"email\" v-model=\"email\" placeholder=\"Email\" required class=\"input-field\" />\n        <input type=\"text\" v-model=\"name\" placeholder=\"Nom\" v-if=\"!isLogin\" required class=\"input-field\" />\n        <input type=\"password\" v-model=\"password\" placeholder=\"Mot de passe\" required class=\"input-field\" />\n        <button type=\"submit\" class=\"submit-btn\">{{ isLogin ? 'Se connecter' : 'S\\'inscrire' }}</button>\n      </form>\n      <p v-if=\"message\" :class=\"messageClass\" class=\"message\">{{ message }}</p>\n  \n      <div v-if=\"!isLogin\" class=\"toggle-link\">\n        <p>Déjà un compte ? <a href=\"#\" @click=\"toggleForm\">Se connecter</a></p>\n      </div>\n      <div v-else class=\"toggle-link\">\n        <p>Pas encore de compte ? <a href=\"#\" @click=\"toggleForm\">S'inscrire</a></p>\n      </div>\n    </div>\n  </template>\n  \n  <script>\n  import axios from 'axios';\n  \n  export default {\n    data() {\n      return {\n        email: '',\n        name: '',\n        password: '',\n        message: '',\n        messageClass: '',\n        isLogin: true // Contrôle si l'on est dans le mode connexion ou inscription\n      };\n    },\n    methods: {\n      async submitForm() {\n        const url = this.isLogin\n          ? 'http://localhost:8000/api/login/'\n          : 'http://localhost:8000/api/register/';\n        \n        const body = this.isLogin\n          ? { email: this.email, password: this.password }\n          : { name: this.name, email: this.email, password: this.password };\n  \n        try {\n          const response = await axios.post(url, body);\n          this.message = response.data.message || 'Action réussie!';\n          this.messageClass = 'success';\n          \n          // Si la connexion est réussie, rediriger l'utilisateur vers la page protégée\n          if (this.isLogin) {\n            localStorage.setItem('access_token', response.data.access_token);\n            localStorage.setItem('refresh_token', response.data.refresh_token);\n            \n            // Redirection vers une page protégée après la connexion\n            this.$router.push('/Home');\n          }\n        } catch (error) {\n          this.message = error.response.data.error || 'Une erreur est survenue.';\n          this.messageClass = 'error';\n        }\n      },\n      toggleForm() {\n        this.isLogin = !this.isLogin;\n        this.message = ''; // Réinitialiser le message à chaque changement de formulaire\n      }\n    }\n  };\n  </script>\n  \n  <style scoped>\n  /* Contexte général de la page */\n  .auth-container {\n    max-width: 450px;\n    margin: 0 auto;\n    margin-top: 20%;\n    padding: 30px;\n    background-color: #f9f9f9;\n    border-radius: 15px;\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\n  }\n  \n  /* Titre de la page */\n  h2 {\n    font-family: 'Roboto', sans-serif;\n    text-align: center;\n    color: #388E3C; /* Vert plus foncé */\n    margin-bottom: 20px;\n    font-weight: 700;\n  }\n  \n  /* Style des champs de saisie */\n  .input-field {\n    width: 100%;\n    padding: 12px;\n    margin: 15px 0;\n    border-radius: 8px;\n    border: 1px solid #ddd;\n    font-size: 16px;\n    transition: border 0.3s ease, box-shadow 0.3s ease;\n  }\n  \n  .input-field:focus {\n    border-color: #4CAF50; /* Bordure verte au focus */\n    box-shadow: 0 0 5px rgba(72, 181, 97, 0.5);\n  }\n  \n  /* Bouton de soumission */\n  .submit-btn {\n    width: 100%;\n    padding: 12px;\n    background-color: #4CAF50; /* Vert principal */\n    color: white;\n    font-size: 16px;\n    border: none;\n    border-radius: 8px;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n  }\n  \n  .submit-btn:hover {\n    background-color: #66BB6A; /* Vert plus clair au survol */\n  }\n  \n  /* Message de retour */\n  .message {\n    text-align: center;\n    margin-top: 20px;\n    font-size: 14px;\n    font-weight: bold;\n  }\n  \n  .message.success {\n    color: #388E3C; /* Vert pour le succès */\n  }\n  \n  .message.error {\n    color: #D32F2F; /* Rouge pour les erreurs */\n  }\n  \n  /* Liens pour basculer entre inscription et connexion */\n  .toggle-link {\n    text-align: center;\n    margin-top: 20px;\n  }\n  \n  .toggle-link a {\n    color: #4CAF50;\n    text-decoration: none;\n    font-weight: 500;\n  }\n  \n  .toggle-link a:hover {\n    text-decoration: underline;\n  }\n  </style>\n  "],"mappings":";;EACSA,KAAK,EAAC;AAAgB;;EAD/BC,GAAA;AAAA;;EAAAA,GAAA;AAAA;;EAQgBC,IAAI,EAAC,QAAQ;EAACF,KAAK,EAAC;;;EARpCC,GAAA;EAY2BD,KAAK,EAAC;;;EAZjCC,GAAA;EAekBD,KAAK,EAAC;;;uBAdpBG,mBAAA,CAiBM,OAjBNC,UAiBM,GAhBMC,KAAA,CAAAC,OAAO,I,cAAjBH,mBAAA,CAAiC,MAFvCI,UAAA,EAEyB,WAAS,M,cAC5BJ,mBAAA,CAA2B,MAHjCK,UAAA,EAGiB,aAAW,IACtBC,mBAAA,CAKO;IALAC,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAJnBC,cAAA,KAAAC,IAAA,KAI6BC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;IAAEb,KAAK,EAAC;sBACvCS,mBAAA,CAAuF;IAAhFP,IAAI,EAAC,OAAO;IAL3B,uBAAAS,MAAA,QAAAA,MAAA,MAAAK,MAAA,IAKqCX,KAAA,CAAAY,KAAK,GAAAD,MAAA;IAAEE,WAAW,EAAC,OAAO;IAACC,QAAQ,EAAR,EAAQ;IAACnB,KAAK,EAAC;iDAA1CK,KAAA,CAAAY,KAAK,E,IACyBZ,KAAA,CAAAC,OAAO,G,+BAAlEH,mBAAA,CAAmG;IAN3GF,GAAA;IAMeC,IAAI,EAAC,MAAM;IAN1B,uBAAAS,MAAA,QAAAA,MAAA,MAAAK,MAAA,IAMoCX,KAAA,CAAAe,IAAI,GAAAJ,MAAA;IAAEE,WAAW,EAAC,KAAK;IAAiBC,QAAQ,EAAR,EAAQ;IAACnB,KAAK,EAAC;kDAAvDK,KAAA,CAAAe,IAAI,E,IANxCC,mBAAA,gB,gBAOQZ,mBAAA,CAAoG;IAA7FP,IAAI,EAAC,UAAU;IAP9B,uBAAAS,MAAA,QAAAA,MAAA,MAAAK,MAAA,IAOwCX,KAAA,CAAAiB,QAAQ,GAAAN,MAAA;IAAEE,WAAW,EAAC,cAAc;IAACC,QAAQ,EAAR,EAAQ;IAACnB,KAAK,EAAC;iDAApDK,KAAA,CAAAiB,QAAQ,E,GACxCb,mBAAA,CAAgG,UAAhGc,UAAgG,EAAAC,gBAAA,CAApDnB,KAAA,CAAAC,OAAO,kD,4BAE5CD,KAAA,CAAAoB,OAAO,I,cAAhBtB,mBAAA,CAAyE;IAV/EF,GAAA;IAUyBD,KAAK,EAV9B0B,eAAA,EAUgCrB,KAAA,CAAAsB,YAAY,EAAQ,SAAS;sBAAItB,KAAA,CAAAoB,OAAO,2BAVxEJ,mBAAA,gB,CAYkBhB,KAAA,CAAAC,OAAO,I,cAAnBH,mBAAA,CAEM,OAFNyB,UAEM,GADJnB,mBAAA,CAAwE,Y,0BAbhFoB,gBAAA,CAaW,mBAAiB,IAAApB,mBAAA,CAAgD;IAA7CqB,IAAI,EAAC,GAAG;IAAEC,OAAK,EAAApB,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAkB,UAAA,IAAAlB,QAAA,CAAAkB,UAAA,IAAAnB,IAAA,CAAU;KAAE,cAAY,E,sBAElEV,mBAAA,CAEM,OAFN8B,UAEM,GADJxB,mBAAA,CAA4E,Y,0BAhBpFoB,gBAAA,CAgBW,yBAAuB,IAAApB,mBAAA,CAA8C;IAA3CqB,IAAI,EAAC,GAAG;IAAEC,OAAK,EAAApB,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAkB,UAAA,IAAAlB,QAAA,CAAAkB,UAAA,IAAAnB,IAAA,CAAU;KAAE,YAAU,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}